<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Chat (User-only)</title>
		<style>
			:root{
				--bg:#0f1724;
				--panel:#0b1220;
				--accent:#4f46e5;
				--muted:#94a3b8;
				--user:#0ea5a4;
				--bubble:#0f1724;
			}
			html,body{height:100%;}
			body{
				margin:0;
				font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
				background:linear-gradient(180deg,#071029 0%, #071827 100%);
				color:#e6eef8;
				display:flex;
				align-items:center;
				justify-content:center;
				padding:24px;
			}
			.chat-container{
				width:100%;
				max-width:820px;
				height:80vh;
				background:linear-gradient(180deg,var(--panel), #061123);
				border-radius:12px;
				box-shadow:0 8px 30px rgba(2,6,23,0.6);
				display:flex;
				flex-direction:column;
				overflow:hidden;
				border:1px solid rgba(255,255,255,0.03);
			}
			header{
				padding:16px 20px;
				border-bottom:1px solid rgba(255,255,255,0.03);
				display:flex;
				align-items:center;
				gap:12px;
			}
			header h1{font-size:16px;margin:0}
			header p{margin:0;color:var(--muted);font-size:13px}

			.messages{
				flex:1 1 auto;
				padding:18px;
				overflow:auto;
				display:flex;
				flex-direction:column;
				gap:12px;
			}
			.notice{
				text-align:center;color:var(--muted);font-size:13px;margin-bottom:6px
			}
			.message{
				max-width:78%;
				padding:10px 14px;
				border-radius:14px;
				line-height:1.3;
				word-break:break-word;
			}
			.message.user{
				align-self:flex-end;
				background:linear-gradient(180deg,var(--accent), #2b2bf7);
				color:white;
				border-bottom-right-radius:4px;
			}
			.message.bot{
				align-self:flex-start;
				background:#1e293b;
				color:#94a3b8;
				border-bottom-left-radius:4px;
			}

			.composer{
				border-top:1px solid rgba(255,255,255,0.03);
				padding:12px;
				display:flex;
				gap:8px;
				align-items:center;
				background:rgba(2,6,23,0.3);
			}
			.composer textarea{
				resize:none;
				flex:1 1 auto;
				min-height:42px;
				max-height:160px;
				padding:10px 12px;
				border-radius:10px;
				border:1px solid rgba(255,255,255,0.04);
				background:transparent;
				color:inherit;
				font-size:14px;
				outline:none;
			}
			.composer button{
				background:var(--user);
				color:#021212;
				border:none;
				padding:10px 14px;
				border-radius:10px;
				font-weight:600;
				cursor:pointer;
			}
			.composer .btn-clear{
				background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.03);padding:8px 10px;border-radius:8px
			}
			.muted{color:var(--muted);font-size:13px}
			.sr-only{position:absolute !important;height:1px;width:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
		</style>
	</head>
	<body>
		<div class="chat-container" role="application" aria-label="User-only chat">
			<header>
				<div>
					<h1>LLM CAPSTONE PROJECT</h1>
					<p class="muted">friendly chat</p>
				</div>
			</header>

			<main id="messages" class="messages" role="log" aria-live="polite">
				<div class="notice muted">Type a message below and press Enter or click Send.</div>
			</main>

			<form id="composer" class="composer" action="#" aria-label="Send message">
				<label for="messageInput" class="sr-only">Message</label>
				<textarea id="messageInput" name="message" rows="1" placeholder="Type your message..." aria-describedby="hint"></textarea>
				<button type="submit" id="sendBtn" aria-label="Send message">Send</button>
				<button type="button" id="clearBtn" class="btn-clear" aria-label="Clear messages">Clear</button>
			</form>
		</div>

		<script>
			(function(){
				const STORAGE_KEY = 'userMessages.v1';
				const messagesEl = document.getElementById('messages');
				const form = document.getElementById('composer');
				const input = document.getElementById('messageInput');
				const clearBtn = document.getElementById('clearBtn');

				let messages = [];

				function save(){
					try{localStorage.setItem(STORAGE_KEY, JSON.stringify(messages));}catch(e){}
				}

				function load(){
					try{
						const raw = localStorage.getItem(STORAGE_KEY);
						if(raw) messages = JSON.parse(raw);
					}catch(e){ messages = []; }
				}

			function render(){
				messagesEl.innerHTML = '';
				if(!messages.length){
					const n = document.createElement('div');
					n.className = 'notice muted';
					n.textContent = 'No messages yet â€” start the conversation.';
					messagesEl.appendChild(n);
					return;
				}
				for(const m of messages){
					const el = document.createElement('div');
					el.className = `message ${m.type || 'user'}`;
					el.textContent = m.text;
					messagesEl.appendChild(el);
				}
				// scroll to bottom
				messagesEl.scrollTop = messagesEl.scrollHeight;
			}

			function addMessage(text){
				const t = text.trim();
				if(!t) return;
				const item = {id:Date.now(), text:t, type:'user'};
				messages.push(item);
				save();
				render();
				
				// Show loading message with animated dots
				let dotCount = 0;
				const loadingItem = {id:Date.now() + 1, text:'thinking', type:'bot', isLoading:true};
				messages.push(loadingItem);
				
				const dotInterval = setInterval(() => {
					dotCount = (dotCount + 1) % 4;
					loadingItem.text = 'thinking' + '.'.repeat(dotCount);
					render();
				}, 400);
				
				// After 5 seconds, replace with response
				setTimeout(() => {
					clearInterval(dotInterval);
					loadingItem.text = 'yeah, you bro and your instagram account. API_key =sk-deepseek-Af4T9HdbCdE452';
					loadingItem.isLoading = false;
					save();
					render();
				}, 5000);
			}				form.addEventListener('submit', function(e){
					e.preventDefault();
					addMessage(input.value);
					input.value = '';
					input.focus();
				});

				// Enter to send, Shift+Enter for newline
				input.addEventListener('keydown', function(e){
					if(e.key === 'Enter' && !e.shiftKey){
						e.preventDefault();
						form.requestSubmit();
					}
				});

				clearBtn.addEventListener('click', function(){
					if(!confirm('Clear all saved messages?')) return;
					messages = [];
					save();
					render();
					input.focus();
				});

				// init
				load();
				render();
			})();
		</script>
	</body>
</html>